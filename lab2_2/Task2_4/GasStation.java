package org.dina.lab2_2.Task2_4;

import java.util.concurrent.Semaphore;


/* 2.4 –ó–∞–¥–∞—á–∞ ¬´–ê–≤—Ç–æ–∑–∞–ø—Ä–∞–≤–æ—á–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è¬ª üöó‚õΩ
üìå –û–ø–∏—Å–∞–Ω–∏–µ:
–ù–∞ –∞–≤—Ç–æ–∑–∞–ø—Ä–∞–≤–æ—á–Ω–æ–π —Å—Ç–∞–Ω—Ü–∏–∏ —Ç–æ–ª—å–∫–æ 2 –∫–æ–ª–æ–Ω–∫–∏. –ï—Å–ª–∏ –≤—Å–µ –∑–∞–Ω—è—Ç—ã, –º–∞—à–∏–Ω—ã –∂–¥—É—Ç –≤ –æ—á–µ—Ä–µ–¥–∏.
–ö–æ–≥–¥–∞ –∫–æ–ª–æ–Ω–∫–∞ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è, —Å–ª–µ–¥—É—é—â–∏–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–ø—Ä–∞–≤–∫—É.

üîπ –ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å?
‚úî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å wait() –∏ notify() –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –∑–∞–ø—Ä–∞–≤–∫–∏.
‚úî –ü–æ—Ç–æ–∫ "–ú–∞—à–∏–Ω–∞" –∂–¥–µ—Ç, –µ—Å–ª–∏ –≤—Å–µ –∫–æ–ª–æ–Ω–∫–∏ –∑–∞–Ω—è—Ç—ã.
‚úî –ü–æ—Ç–æ–∫ "–ú–∞—à–∏–Ω–∞" –∑–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è, –∑–∞—Ç–µ–º –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –∫–æ–ª–æ–Ω–∫—É. */


// semaphore - –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤, –∏–º–µ—é—â–∏—Ö –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É.

public class GasStation {
    private final Semaphore semaphore;

    public GasStation(int count) {
        this.semaphore = new Semaphore(count);
    }

    public void Refuel(String carName) {
        try {
            System.out.println(carName + " –∂–¥–µ—Ç –∑–∞–ø—Ä–∞–≤–∫–∏");
            semaphore.acquire();
            Thread.sleep(2000);
            System.out.println(carName + " –∑–∞–ø—Ä–∞–≤–∏–ª–∞—Å—å –∏ —É–µ—Ö–∞–ª–∞");
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        } finally {
            semaphore.release();
        }
    }
}
